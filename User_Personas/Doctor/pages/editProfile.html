<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assest/pages/notify.css">
    <link rel="stylesheet" href="./EditProfile.css">
    <title>Doctor Login | FreshBYE</title>
</head>

<body>
    <div class="menu">
        <div class="logo">
            <a href="#"><span>Fresh</span>BYE</a>
        </div>

    </div>
    <div id="HoleCard">
        <div id="ImageContainer">
            <img src="../assests/Images/Editprofile.jpg" alt="DoctorImg" id="LoginImg">
        </div>
        <div id="form">
            <form action="#" id="form_container" class="container">
                <h2 id="titleofForm">Edit <span>Profile</span></h2>
                <input type="text" id="Username" title="User Must Fill All Credential" placeholder="Enter User Name"
                    pattern="[A-Za-z]{3,32}" required>

                <input type="url" name="profile pic" title="User Must Fill All Credential" id="Profile"
                    placeholder="Enter profile URL" required>
                <input type="tel" placeholder="Enter Mobile" title="User Must Fill All Credential" Your Whatsapp Number"
                    id="number" pattern="[0-9]{5}[0-9]{5}" required>

                <input type="textarea" placeholder="Enter something about You" id="aboutdoc" required>

                <button onclick="update()">Save</button>
                <small id="createacc">I want to<span><a href="./profile.html"> Go Back</a></span></small>
            </form>
        </div>
    </div>
    <script src="/library/notify.js"></script>
    <script>
        let doctorCategory = JSON.parse(localStorage.getItem("Doctor_category")); //parse data from local storage
        let Doctor_id = window.localStorage.getItem("Current_User_id");
        let Doctor_data = doctorCategory.find((doc) => doc.Email === Doctor_id);

        document.getElementById("Username").value = Doctor_data["Username"];
        document.getElementById("Profile").value = Doctor_data["Profile"];
        document.getElementById("number").value = Doctor_data["Contact"];

        document.getElementById("aboutdoc").value = Doctor_data["Description"];


        function update() {
            event.preventDefault();
            let editedUserName = document.getElementById("Username").value;
            let editedProfile = document.getElementById("Profile").value;
            let editedNumber = document.getElementById("number").value;

            let editedDescription = document.getElementById("aboutdoc").value;

            // update the Doctor_data object directly
            Doctor_data["Username"] = editedUserName;
            Doctor_data["Profile"] = editedProfile;
            Doctor_data["Contact"] = editedNumber;

            Doctor_data["Description"] = editedDescription;

            // update the Doctor_category array in local storage
            let updatedCategory = doctorCategory.map((doc) => {
                if (doc.Email === Doctor_id) {
                    return Doctor_data;
                } else {
                    return doc;
                }
            });

            if (document.getElementById("Username").value.length == 0) {
                Notify.error("Username Input Need Some Data in it");
            } else if (document.getElementById("Profile").value.length === 0) {
                Notify.error("Profile Input Need  Some Data in it");

            } else if (document.getElementById("aboutdoc").value.length == 0) {
                Notify.error("Description should be Contains Some data");
            } else if (document.getElementById("number").value.length
                !== 10) {
                Notify.error("Mobile Number should be Contains 10 Digits");

            } else {
                localStorage.setItem("Doctor_category", JSON.stringify(updatedCategory));
                Notify.success("Update successful!");
                location.href = "./profile.html";
            }
        }






    </script>
    <script src="/library/notify.js"></script>
</body>

</html>