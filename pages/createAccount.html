<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/CSS/CommonProfile.css">
    <title>SignUp</title>
</head>

<body class="main-parent">
    <div class="containerOfHole">

        <form class="containerOfMini" id="form">
            <h1>Sign<span>up</span></h1>
            <input class="input" id="fname" placeholder="First Name" type="text" pattern="[A-Za-z]{3,32}" required />

            <input class="input" id="mname" placeholder="Middle Name" type="text" pattern="[A-Za-z]{3,32}" required />
            <input class="input" id="Lname" placeholder="Last Name" type="text" pattern="[A-Za-z]{3,32}" required />


            <input class="input" id="email" placeholder="E-mail id" type="email" required />

            <input class="input" id="phnumber" placeholder="Phone Number" type="number" pattern="[0-9]{1,10}"
                required />
            <input class="input" id="age" placeholder="Age" type="number" pattern="[0-9]{1,2}" required />
            <input class="input" type="password"
                title="Password must contain: Minimum 8 characters atleast 1 Alphabet and 1 Number"
                placeholder="Enter Password" id="password" minlength="8" required
                pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$" />


            <input class="input" type="password"
                title="Password must contain: Minimum 8 characters atleast 1 Alphabet and 1 Number"
                placeholder="Re-Enter Password" id="cpassword" minlength="8" required
                pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$" />

            <button type="submit" class="btn">submit</button>
        </form>
    </div>
    <script>
        let arr = [];
        let form = document.getElementById("form");
        form.addEventListener("submit", function (event) {
            event.preventDefault();
            let userdata = {};
            const fname = document.getElementById("fname").value;
            const mname = document.getElementById("mname").value;
            const Lname = document.getElementById("Lname").value;
            const email = document.getElementById("email").value;
            const phnumber = document.getElementById("phnumber").value;
            const age = document.getElementById("age").value;
            const password = document.getElementById("password").value;
            const cpassword = document.getElementById("cpassword").value;
            let id = self.crypto.randomUUID();
            userdata["fname"] = fname;
            userdata["mname"] = mname;
            userdata["Lname"] = Lname;
            userdata["phnumber"] = phnumber;
            userdata["age"] = age;
            userdata["email"] = email.toLowerCase();
            userdata["password"] = password;
            userdata["cpassword"] = cpassword;
            userdata.id = id;
            if (userdata["password"] === userdata["cpassword"]) {
                arr.push(userdata);
            }

            if (window.localStorage.getItem("user") === null) {
                window.localStorage.setItem("user", JSON.stringify(arr));
            } else {
                let local = window.localStorage.getItem("user");
                let json = JSON.parse(local);
                json.push(userdata);
                window.localStorage.setItem("user", JSON.stringify(json));
            }
            window.location.href = "./login.html";
        });
    </script>
</body>

</html>

<!-- 1.first step of js is n this code is create a empty array 
2.next get value from form by id
3. create s function for event listening 
4. create a object for push user data
5. get value from input 
6. create a unique id for user 
7. assign value to key 
8. write a if/else condition to store data in DB 
9.alert for successful or failed   -->